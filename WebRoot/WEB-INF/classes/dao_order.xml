<?xml version="1.0" encoding="UTF-8"?>
<root>
	<dao name="QueryAllOrder">
		<statement><![CDATA[select a.seq,a.orderNo,a.GPID,a.memberSeq,a.userId,a.userName,a.email,a.address,a.tel,
		a.mobile,a.productSeq,a.productKind,a.skin,a.styleSeq,a.captionFont,a.captionPic,a.captionPic2,a.captionText,
		a.captionShow,a.captionEffect,a.captionColor,a.lcoverPic,a.hcoverPic,a.amount,a.bookNum,a.createDate,
		a.updateDate,a.status,a.makeStatus,a.pageNum,a.pageSize,a.coverPdfPath,a.pdfPath,a.pdfFailNum,
		a.insidePath,a.copyrightPath,a.titlePath,
		a.swfStatus,a.cswfStatus,a.productName,a.valuation,a.invoiceType,a.invoiceBuyer,
		a.total,a.userDate,a.freight,a.goldSeq,a.goldStatus,
		a.goldMethod,a.BankIDr,a.InAcctNo,a.usedPage,a.deleteStatus,a.demoStatus,a.shareStatus,a.onsalesType,
		a.onsalesNum,a.onsalesRate,a.onsalesSeq,a.company,a.orderPwd,a.urlEnable,a.payAmt,a.printer,a.care,a.sender,
		a.clientRemark,a.userMakeNumber,a.hits,a.shareCgy,a.shareDate,a.width,a.height,
		b.userId,b.name,
		k.name as orderkindsName  
		from PhotoOrder a 
		inner join member b on a.memberSeq = b.seq 
		left join orderkinds k on a.productSeq = k.seq
		where
			(a.status > -9 or a.status <= 20)]]></statement>
		<statement test="getInt('feature') == 1"><![CDATA[
		and exists(
		select s.* from designer s where s.orderSeq = a.seq
		)
		]]></statement>
		<parameter condition="a.seq = ? " kind="2" type="int">seq</parameter>
		<parameter condition="a.status = ? " kind="2" type="int">status</parameter>
		<parameter condition="a.userId like ? " kind="2" type="LikeString">userId</parameter>
		<parameter condition="a.userName like ? " kind="2" type="LikeString">userName</parameter>
		<parameter condition="a.orderNo like ? " kind="2" type="LikeString">orderNo</parameter>
		<orderby>order by a.userDate desc</orderby>
	</dao>
	<dao name="MemberLoginBySeq">
		<statement>select a.*,b.register,b.version from Member a, seller b where
			a.seq=? and a.status=1 and a.GPID=b.GPID and b.status=1
		</statement>
		<parameter type="long">memberSeq</parameter>
	</dao>
	<dao name="ReeditOrder">
		<statement>update PhotoOrder set status=1,MakeStatus=0 where seq=?</statement>
		<parameter type="long">seq</parameter>
	</dao>
	<dao name="ReUserMakeNumber">
		<statement><![CDATA[update PhotoOrder set userMakeNumber=0 where seq=?]]></statement>
		<parameter type="long">seq</parameter>
	</dao>
	<dao name="StartMakePDF">
		<statement>update PhotoOrder set makeStatus=2 where seq=?</statement>
		<parameter type="long">seq</parameter>
	</dao>
	<dao name="StartMakeSWF">
		<statement>update PhotoOrder set swfStatus=1 where seq=?</statement>
		<parameter type="long">seq</parameter>
	</dao>
	<dao name="StartMakeCoverSWF">
		<statement>update PhotoOrder set cswfStatus=1 where seq=?</statement>
		<parameter type="long">seq</parameter>
	</dao>
	<dao name="DeleteOrder">
		<statement>delete from PhotoOrder where seq=? and (status = 0 or status = 1 or status = -20)</statement>
		<parameter type="long">seq</parameter>
	</dao>
	<dao name="DeleteOrderPicByOrderSeq">
		<statement>delete from orderpic where orderSeq=? and userId=?</statement>
		<parameter type="long">seq</parameter>
		<parameter type="String">userId</parameter>
	</dao>
	<dao name="UpdateOderPwd">
		<statement>update PhotoOrder set urlEnable = ? , orderPwd=? where seq=? and memberSeq = ?</statement>
		<parameter type="int">urlEnable</parameter>
		<parameter type="String">orderPwd</parameter>
		<parameter type="long">seq</parameter>
		<parameter type="long">memberSeq</parameter>
	</dao>
</root>
