<?xml version="1.0" encoding="big5"?>
<root>
  <dao name="AddOnsales">
    <statement>insert into
      onsales(GPID,companyName,description,ptype,stype,rateNum,id,startNum,endNum,startDate,endDate,status,usedNum,createDate,updateDate,modifyId) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)</statement>
    <parameter type="String">GPID</parameter>
    <parameter type="String">companyName</parameter>
    <parameter type="String">description</parameter>
    <parameter type="short">ptype</parameter>
    <parameter type="short">stype</parameter>
    <parameter type="double">rateNum</parameter>
    <parameter type="String">id</parameter>
    <parameter type="long">startNum</parameter>
    <parameter type="long">endNum</parameter>
    <parameter type="Timestamp">startDate</parameter>
    <parameter type="Timestamp">endDate</parameter>
    <parameter type="short">status</parameter>
    <parameter type="int">usedNum</parameter>
    <parameter type="Timestamp">now()</parameter>
    <parameter type="Timestamp">now()</parameter>
    <parameter type="String">modifyId</parameter>
  </dao>
  <dao name="UpdateOnsales">
    <statement>update onsales set
      GPID=?,companyName=?,description=?,ptype=?,stype=?,rateNum=?,id=?,startNum=?,endNum=?,startDate=?,endDate=?,status=?,usedNum=?,updateDate=?,modifyId=?
      where seq=?</statement>
    <parameter type="String">GPID</parameter>
    <parameter type="String">companyName</parameter>
    <parameter type="String">description</parameter>
    <parameter type="short">ptype</parameter>
    <parameter type="short">stype</parameter>
    <parameter type="double">rateNum</parameter>
    <parameter type="String">id</parameter>
    <parameter type="long">startNum</parameter>
    <parameter type="long">endNum</parameter>
    <parameter type="Timestamp">startDate</parameter>
    <parameter type="Timestamp">endDate</parameter>
    <parameter type="short">status</parameter>
    <parameter type="int">usedNum</parameter>
    <parameter type="Timestamp">now()</parameter>
    <parameter type="String">modifyId</parameter>
    <parameter type="long">seq</parameter>
  </dao>
  <dao name="QueryAllOnsales">
    <statement>select  * from onsales where status = 1 or status = 0</statement>
  </dao>
  <dao name="QueryOnsalesByUse">
    <statement><![CDATA[select * from onsales where status = 1 and GPID = ? and id = ? and
      (startNum <= ? and endNum >= ? ) and (startDate <= ? and endDate >= ? ) and ptype = ?]]></statement>
      <parameter type="String">GPID</parameter>
      <parameter type="String">id</parameter>
      <parameter type="long">num</parameter>
      <parameter type="long">num</parameter>
      <parameter type="Timestamp">useDate</parameter>
      <parameter type="Timestamp">useDate</parameter>
      <parameter type="short">ptype</parameter>
  </dao>

  <dao name="QueryOnsalesByUse2">
    <statement>select * from onsales where seq = ?  and (? between startDate and endDate )</statement>
      <parameter type="long">onsalesSeq</parameter>
      <parameter type="Timestamp">useDate</parameter>
  </dao>

  <dao name="DeleteOnsales">
    <statement>update onsales set status = 3 where seq=?</statement>
    <parameter type="long">seq</parameter>
  </dao>
  <dao name="UpdateOnsalesStatus">
    <statement>update onsales set status=? where seq=? and GPID=?</statement>
    <parameter type="short">status</parameter>
    <parameter type="long">seq</parameter>
    <parameter type="String">GPID</parameter>
  </dao>
  <dao name="UpdateOnsalesUsedNum">
    <statement>update onsales set usedNum=? where seq=?</statement>
    <parameter type="long">usedNum</parameter>
    <parameter type="long">seq</parameter>
  </dao>
  <dao name="StartOnsales">
    <statement>update onsales set status = 1 where seq=?</statement>
    <parameter type="long">seq</parameter>
  </dao>
  <dao name="StopOnsales">
    <statement>update onsales set status = 0 where seq=?</statement>
    <parameter type="long">seq</parameter>
  </dao>
</root>
