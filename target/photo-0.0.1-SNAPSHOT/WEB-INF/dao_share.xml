<?xml version="1.0" encoding="big5"?>
<root>
	<dao name="QueryAllshareCgy">
		<statement>select * from shareCgy where status = 1 order by seq</statement>
	</dao>
	<dao name="QueryShareCgy">
		<statement>select * from shareCgy where seq = ?</statement>
		<parameter type="int">seq</parameter>
	</dao>
	<dao name="QueryAllSharePhoto">
		<statement>
			select a.*,b.lpicture,c.GPID,c.userId from PhotoOrder a left join PhotoStyle b on a.styleSeq = b.seq inner join member c on a.memberSeq = c.seq where a.shareStatus = 1 order by a.hits desc
		</statement>
	</dao>
	<dao name="RecommendPhoto">
		<statement>
			select a.*,b.lpicture,c.GPID,c.userId from PhotoOrder a left join PhotoStyle b on a.styleSeq = b.seq 
			inner join member c on a.memberSeq = c.seq 
			where a.shareStatus = 1 and (a.swfStatus = 2 or a.demoStatus = 1) order by a.hits desc
		</statement>
	</dao>	
	<dao name="QueryAllSharePhotoByShareCgy">
		<statement>
			select a.*,b.lpicture,c.GPID,c.userId from PhotoOrder a left join PhotoStyle b on a.styleSeq = b.seq inner join member c on a.memberSeq = c.seq 
			where a.shareStatus = 1 and shareCgy = ? and
			(a.swfStatus = 2 or a.demoStatus = 1) order by a.hits desc
		</statement>
		<parameter type="int">shareCgy</parameter>
	</dao>
	<dao name="UpdateOrderShareDataByMember">
		<statement>update PhotoOrder set shareDate=?,captionText=?,shareStatus=?,shareCgy=? where seq=? and memberSeq =?</statement>
		<parameter type="Timestamp">now()</parameter>
		<parameter type="String">captionText</parameter>
		<parameter type="int">shareStatus</parameter>
		<parameter type="int">shareCgy</parameter>
		<parameter type="long">seq</parameter>
		<parameter type="long">memberSeq</parameter>
	</dao>
	<dao name="AddShareData">
		<statement>insert into sharedata(content,createDate,createId,createName,updateId,updateDate,status,score,orderSeq) values(?,?,?,?,?,?,?,?,?)</statement>
		<parameter type="String">content</parameter>
		<parameter type="Timestamp">now()</parameter>
		<parameter type="String">createId</parameter>
		<parameter type="String">createName</parameter>
		<parameter type="String">updateId</parameter>
		<parameter type="Timestamp">now()</parameter>
		<parameter type="short">status</parameter>
		<parameter type="int">score</parameter>
		<parameter type="long">orderSeq</parameter>
	</dao>
	<dao name="UpdateShareData">
		<statement>update sharedata set content=?,updateId=?,updateDate=?,status=?,score=?,orderSeq=? where seq=?</statement>
		<parameter type="String">content</parameter>
		<parameter type="String">updateId</parameter>
		<parameter type="Timestamp">now()</parameter>
		<parameter type="short">status</parameter>
		<parameter type="int">score</parameter>
		<parameter type="long">orderSeq</parameter>
		<parameter type="long">seq</parameter>
	</dao>
	<dao name="QueryShareDataByOrderSeq">
		<statement>select * from sharedata where orderSeq=?</statement>
		<parameter type="long">orderSeq</parameter>
	</dao>
	<dao name="QueryShareScore">
		<statement>select count(*) as scores from sharedata where orderSeq = ? and score = 5</statement>
		<parameter type="long">orderSeq</parameter>
	</dao>
	<dao name="AddHits">
		<statement>update PhotoOrder set hits = hits + 1 where seq=?</statement>
		<parameter type="long">seq</parameter>
	</dao>
</root>
